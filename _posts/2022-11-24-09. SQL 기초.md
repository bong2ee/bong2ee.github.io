---
layout: post
title:  "09. SQL 기초"
date:   2022-11-24
categories: db
---
1. 데이터 타입

    1) 테이블에 데이터가 저장되는 형태

    2) 데이터 유형 

    3) 문자형 

        - CHAR(길이) : 고정길이 문자열 저장

          CHARACTER(길이)

            - 예) CHAR(5) : 컬럼에 4자리 문자열을 저장하면 맨끝에 1자리가 공백으로 채워짐

        - VARCHAR(길이) : 가변길이 문자열 저장

          CHARACTER VARYING(길이)

            - 예) VARCHAR(5) : 컬럼에 4자리 문자열을 저장하면 4자리 문자열만 저장됨

        - TEXT : 길이 제한이 없는 가변길이 문자열 저장

          VARCHAR

    4) 숫자형

        - NUMERIC(총자리수, 소수점자리수)

            - 예) NUMERIC(7, 3) : 최대 999.999 까지 저장

        - NUMERIC(총자리수)

            - 예) NUMERIC(7) : 최대 9999999 까지 저장

        - SMALLINT : 정수형 저장

        - INTEGER, INT

        - BIGINT (스토리지 용량 많이 사용, DBMS 성능 저하)

        - SERIAL 

            - 데이터가 저장될 때 순차적으로 유일한 숫자(번호)가 저장 

    5) 날짜형

        - DATE 

            - 날짜값 저장

            - 일자 데이터 저장

            - yyyy-mm-dd (2022-09-21)과 같은 형식 저장

        - TIME

          TIME(정밀도)

            - 시간값 저장

            - 시간 데이터 저장

            - 시간값 최대 6자리의 정밀도를 가짐

        - TIMESTAMP

            - 시간대(TIMEZONE)가 없는 년월일시분초,마이크로세컨드 저장

        - TIMESTAMPTZ

            - 시간대(TIMEZONE)가 있는 년월일시분초,마이크로세컨드 저장

2. 테이블 생성

    1) 제약조건

        - 테이블을 구성하는 각각의 컬럼들은 제약조건을 가질 수 있음

        - NOT NULL

            - 컬럼의 값에 널이 들어갈 수 없다.

            - 반드시 데이터 값이 들어가야 함.

        - UNIQUE

            - UNIQUE 컬럼에 들어가는 값은 테이블 내에서 유일함을 보장함.

            - 해당 제약 조건이 있는 컬럼의 값은 테이블 내에서 유일해야 함.

        - PRIMARY KEY

            - NOT NULL + UNIQUE한 값이 들어가는 것을 보장함.

        - CHECK

            - 해당 제약 조건이 있는 컬럼은 지정하는 조건에 맞는 값만 들어가야 함.

            - 컬럼의 값에 사용자가 지정하는 특정 표현식을 만족하는 데이터가 들어감.

            - ex) 학점 컬럼은 0.00~4.50 범위의 값만 허용함

        - FOREIGN KEY

            - 해당 컬럼의 값은 참조하는 부모 테이블에 PK로써 존재하는 것을 보장함 
            
            - 해당 제약 조건이 있는 컬럼의 값은 참조하는 테이블의 특정 컬럼에 값이
              존재해야 함

    2) CTAS (CREATE TABLE AS SELECT)

        - SELECT문을 기반으로 CREATE TABLE 하는 CREATE문

        - 문법


            - CREATE TABLE NEW_TABLE
              AS 
              SELECT문


            - CREATE TABLE IF NOT EXISTS NEW_TABLE
              AS
              SELECT문 
              

3. 테이블 수정

    1) 컬럼에 대한 ADD, DROP, RENAME

    2) 컬럼에 대한 CHECK 제약조건 추가 

4. 테이블 내용(데이터) 비우기
    
5. 테이블 복사 명령

    1) 기존 테이블의 테이블 구조 및 데이터를 복사

6. 기본키(PK, PRIMARY KEY)

    1) 테이블 내에서 고유하게 행을 식별하는데 사용되는 컬럼 또는 컬럼들의 조합

    2) 테이블 생성 + 기본키 지정

    3) 테이블 생성 + 기본키 지정 + 제약조건명 정의

    4) 테이브 생성, 기본키 지정

    5) 테이블 생성, 데이터 입력, SERIAL 형식의 기본키 추가

7. 외래키(FK, FOREIGN KEY)

    1) (부모)테이블의 기본키를 참조하는 (자식)테이블의 컬럼 또는 컬럼들의 조합

    2) 부모/자식 테이블 생성 및 외래키 생성 옵션 - NO ACTION 

    3) 부모/자식 테이블 생성 및 외래키 생성 옵션 - SET NULL

    4) 부모/자식 테이블 생성 및 외래키 생성 옵션 - CASCADE

8. 체크 제약조건

    1) 컬럼값에 대한 제약을 거는 것

9. UNIQUE 제약조건

    1) 컬럼 혹은 컬럼 조합에 대한 유니크 제약을 거는 것임

    2) 유니크 제약이 걸린 컬럼 혹은 컬럼조합에 대한 인덱스가 자동으로 생성됨

10. NOT NULL

    1) 특정 컬럼에 값이 NULL이 들어오는 것을 차단
    
    2) NULL

        - 알 수 없거나 정보가 누락되었음

        - 빈 문자열이나 숫자 0과는 다름

    3) NULL 비교

        - 특정 컬럼값이 NULL인지 아닌지 비교하는 방법

        - IS NULL : 널인지 판단
        
        - IS NOT NULL : 널이 아닌지 판단

